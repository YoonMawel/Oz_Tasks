# 팩토리 메서드 패턴

Factory Method Pattern이란, 객체 생성을 공장(Factory)클래스로 추상화 하고 캡슐화하여 대신 생성하게 하는 디자인 패턴이다.

이 패턴은 객체 생성을 서브 클래스에게 위임하여 유연하게 객체를 생성하는 것을 목적으로 한다.

## 특징

객체를 생성해야 할 때 클래스가 직접 객체를 생성하는 것이 아니라, 객체 생성을 위한 팩토리 메서드를 제공하여 서브 클래스에서 해당 메서드를 오버라이드하고 적절한 객체를 생성할 수 있도록 한다.

### 팩토리 메서드 패턴 예제


```
from abc import ABCMeta, abstractmethod


# 팩토리를 가진 클래스 (해당 클래스 상속한 클래스 포함)
class SocialLoginService(metaclass=ABCMeta):
    # 로그인 서비스의 규격 (인터페이스!)
    @abstractmethod
    def login(self, access_token: str):
        pass


# Concrete Products
# 팩토리로 만들어지는 결과
class KakaoLoginService(SocialLoginService):
    def login(self, access_token: str):
        print(f"Kakao login with {access_token}")

# 팩토리로 만들어지는 결과
class NaverLoginService(SocialLoginService):
    def login(self, access_token: str):
        print(f"Naver login with {access_token}")


# Creator
# 로그인 서비스의 최소 규격
class SocialLoginFactory(metaclass=ABCMeta):
    @abstractmethod
    def create_login_service(self):
    # 이 함수가 팩토리
        pass


# Concrete Creators
# 어떤 제품을 만들지 결정하는 실제 팩토리
class KakaoLoginFactory(SocialLoginFactory):
    def create_login_service(self) -> SocialLoginService:
        return KakaoLoginService()

# 어떤 제품을 만들지 결정하는 실제 팩토리
class NaverLoginFactory(SocialLoginFactory):
    def create_login_service(self) -> SocialLoginService:
        return NaverLoginService()


# Client
# 클라이언트, 로그인을 수행한다는 업무를 담당함
class AuthService:
    # 2. 팩토리로 생성
    def __init__(self, factory: SocialLoginFactory):
        self.login_service = factory.create_login_service()

    def login(self, access_token: str):
        return self.login_service.login(access_token)


# 1. 어떤 팩토리를 쓸 지 선택
if __name__ == "__main__":
    # Kakao 로그인
    kakao_factory = KakaoLoginFactory()
    kakao_auth_service = AuthService(kakao_factory)
    kakao_auth_service.login("kakao_access_token")

    print()
    # Naver 로그인
    naver_factory = NaverLoginFactory()
    naver_auth_service = AuthService(naver_factory)
    naver_auth_service.login("naver_access_token")

```

## 코드 흐름

> 1. if __name__ == "__main__"에서 어떤 공장(Factory)을 사용할 건지 선택
> 2. 해당 팩토리로 **AuthService** 생성

